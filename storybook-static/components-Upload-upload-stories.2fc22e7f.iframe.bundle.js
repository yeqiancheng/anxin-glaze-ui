"use strict";(self.webpackChunkanxin_glaze_ui=self.webpackChunkanxin_glaze_ui||[]).push([[727],{"./src/components/Button/button.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var C_Users_Administrator_Desktop_anxin_glaze_ui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),C_Users_Administrator_Desktop_anxin_glaze_ui_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),classnames__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/classnames/index.js")),classnames__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_3__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");const _excluded=["disabled","className","size","btnType","children","href"],Button=_ref=>{let{disabled=!1,className,size="sm",btnType="default",children,href}=_ref,restProps=(0,C_Users_Administrator_Desktop_anxin_glaze_ui_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1__.A)(_ref,_excluded);const classes=classnames__WEBPACK_IMPORTED_MODULE_3___default()("btn",className,{["btn-".concat(btnType)]:btnType,["btn-".concat(size)]:size,disabled:"default"===btnType&&disabled});return"link"===btnType&&href?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("a",(0,C_Users_Administrator_Desktop_anxin_glaze_ui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.A)((0,C_Users_Administrator_Desktop_anxin_glaze_ui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.A)({href,className:classes},restProps),{},{children})):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("button",(0,C_Users_Administrator_Desktop_anxin_glaze_ui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.A)((0,C_Users_Administrator_Desktop_anxin_glaze_ui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.A)({className:classes,disabled},restProps),{},{children}))},__WEBPACK_DEFAULT_EXPORT__=Button;Button.__docgenInfo={description:"",methods:[],displayName:"Button",props:{disabled:{defaultValue:{value:"false",computed:!1},required:!1},size:{defaultValue:{value:'"sm"',computed:!1},required:!1},btnType:{defaultValue:{value:'"default"',computed:!1},required:!1}}}},"./src/components/Icon/icon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var C_Users_Administrator_Desktop_anxin_glaze_ui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),C_Users_Administrator_Desktop_anxin_glaze_ui_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@fortawesome/react-fontawesome/index.es.js"),classnames__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_3__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");const _excluded=["theme","className"],Icon=_ref=>{let{theme,className}=_ref,restProps=(0,C_Users_Administrator_Desktop_anxin_glaze_ui_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1__.A)(_ref,_excluded);const classes=classnames__WEBPACK_IMPORTED_MODULE_3___default()("viking-icon",className,{["icon-".concat(theme)]:theme});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_2__.g,(0,C_Users_Administrator_Desktop_anxin_glaze_ui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.A)({className:classes},restProps))},__WEBPACK_DEFAULT_EXPORT__=Icon;Icon.__docgenInfo={description:"",methods:[],displayName:"Icon",props:{theme:{required:!1,tsType:{name:"union",raw:'| "primary"\r\n| "secondary"\r\n| "success"\r\n| "info"\r\n| "warning"\r\n| "danger"\r\n| "light"\r\n| "dark"',elements:[{name:"literal",value:'"primary"'},{name:"literal",value:'"secondary"'},{name:"literal",value:'"success"'},{name:"literal",value:'"info"'},{name:"literal",value:'"warning"'},{name:"literal",value:'"danger"'},{name:"literal",value:'"light"'},{name:"literal",value:'"dark"'}]},description:"主题"}},composes:["FontAwesomeIconProps"]}},"./src/components/Progress/progress.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Progress=_ref=>{let{percent,strokeHeight=15,showText=!0,style,theme="primary"}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"viking-progress-bar",style,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"viking-progress-bar-outer",style:{height:"".concat(strokeHeight,"px")},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"viking-progress-bar-inner color-".concat(theme),style:{width:"".concat(percent,"%")},children:showText&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{className:"inner-text",children:"".concat(percent,"%")})})})})},__WEBPACK_DEFAULT_EXPORT__=Progress;Progress.__docgenInfo={description:"",methods:[],displayName:"Progress",props:{percent:{required:!0,tsType:{name:"number"},description:""},strokeHeight:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"15",computed:!1}},showText:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},style:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:""},theme:{required:!1,tsType:{name:"union",raw:'| "primary"\r\n| "secondary"\r\n| "success"\r\n| "info"\r\n| "warning"\r\n| "danger"\r\n| "light"\r\n| "dark"',elements:[{name:"literal",value:'"primary"'},{name:"literal",value:'"secondary"'},{name:"literal",value:'"success"'},{name:"literal",value:'"info"'},{name:"literal",value:'"warning"'},{name:"literal",value:'"danger"'},{name:"literal",value:'"light"'},{name:"literal",value:'"dark"'}]},description:"",defaultValue:{value:'"primary"',computed:!1}}}}},"./src/components/Upload/upload.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CheckUpload:()=>CheckUpload,DragUpload:()=>DragUpload,SimpleUpload:()=>SimpleUpload,__namedExportsOrder:()=>__namedExportsOrder,default:()=>upload_stories});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react=__webpack_require__("./node_modules/react/index.js"),Button_button=__webpack_require__("./src/components/Button/button.tsx"),axios=__webpack_require__("./node_modules/axios/lib/axios.js"),icon=__webpack_require__("./src/components/Icon/icon.tsx"),progress=__webpack_require__("./src/components/Progress/progress.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const UploadList=_ref=>{let{fileList,onRemove}=_ref;return(0,jsx_runtime.jsx)("ul",{className:"viking-upload-list",children:fileList.map(item=>(0,jsx_runtime.jsx)("li",{className:"viking-upload-list-item",children:(0,jsx_runtime.jsxs)("span",{className:"file-name file-name-".concat(item.status),children:[(0,jsx_runtime.jsx)(icon.A,{icon:"file-alt",theme:"secondary"}),item.name,(0,jsx_runtime.jsxs)("span",{className:"file-status",children:["uploading"===item.status&&(0,jsx_runtime.jsx)(icon.A,{icon:"spinner",spin:!0,theme:"primary"}),"success"===item.status&&(0,jsx_runtime.jsx)(icon.A,{icon:"check-circle",theme:"success"}),"error"===item.status&&(0,jsx_runtime.jsx)(icon.A,{icon:"times-circle",theme:"danger"})]}),(0,jsx_runtime.jsx)("span",{className:"file-actions",children:(0,jsx_runtime.jsx)(icon.A,{icon:"times",onClick:()=>{onRemove(item)}})}),"uploading"===item.status&&(0,jsx_runtime.jsx)(progress.A,{percent:item.percent||0})]})},item.uid))})},uploadList=UploadList;UploadList.__docgenInfo={description:"",methods:[],displayName:"UploadList",props:{fileList:{required:!0,tsType:{name:"Array",elements:[{name:"UploadFile"}],raw:"UploadFile[]"},description:""},onRemove:{required:!0,tsType:{name:"signature",type:"function",raw:"(_file: UploadFile) => void",signature:{arguments:[{type:{name:"UploadFile"},name:"_file"}],return:{name:"void"}}},description:""}}};var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames);function Dragger(props){const{onFile,children}=props,[dragOver,setDragOver]=(0,react.useState)(!1),klass=classnames_default()("viking-uploader-dragger",{"is-dragover":dragOver}),handleDrag=(e,over)=>{e.preventDefault(),setDragOver(over)};return(0,jsx_runtime.jsxs)("div",{className:klass,onDragOver:e=>handleDrag(e,!0),onDragLeave:e=>{handleDrag(e,!1)},onDrop:e=>{e.preventDefault(),setDragOver(!1),onFile(e.dataTransfer.files)},children:[(0,jsx_runtime.jsx)(icon.A,{icon:"cloud-arrow-up",size:"5x"}),(0,jsx_runtime.jsx)("div",{children})]})}Dragger.__docgenInfo={description:"",methods:[],displayName:"Dragger",props:{onFile:{required:!0,tsType:{name:"signature",type:"function",raw:"(files: FileList) => void",signature:{arguments:[{type:{name:"FileList"},name:"files"}],return:{name:"void"}}},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const Upload=_ref=>{let{action,defaultFileList,onProgress,onSuccess,onError,beforeUpload,onChange,onRemove,headers,name="file",data,withCredentials,accept,multiple,children,drag=!1}=_ref;const fileInput=(0,react.useRef)(null),[fileList,setFileList]=(0,react.useState)(defaultFileList||[]),updateFileList=(updateFile,updateObj)=>{setFileList(prevList=>prevList.map(file=>file.uid===updateFile.uid?(0,objectSpread2.A)((0,objectSpread2.A)({},file),updateObj):file))},handleClick=()=>{fileInput.current&&fileInput.current.click()},uploadFiles=files=>{Array.from(files).forEach(file=>{if(beforeUpload){const result=beforeUpload(file);result&&result instanceof Promise?result.then(processedFile=>{post(processedFile)}):!1!==result&&post(file)}else post(file)})},post=file=>{let _file={uid:Date.now()+"upload-file",status:"ready",name:file.name,size:file.size,percent:0,raw:file};setFileList(prevList=>[_file,...prevList]);const formData=new FormData;formData.append(name,file),data&&Object.keys(data).forEach(key=>{formData.append(key,data[key])}),axios.A.post(action,formData,{headers:(0,objectSpread2.A)((0,objectSpread2.A)({},headers),{},{"Content-Type":"multipart/form-data"}),withCredentials,onUploadProgress:e=>{const percentage=Math.floor(100*e.progress);updateFileList(_file,{percent:percentage,status:"uploading"}),percentage<100&&onProgress&&onProgress(percentage,file)}}).then(res=>{updateFileList(_file,{status:"success",response:res.data}),onSuccess&&onSuccess(res.data,file),onChange&&onChange(file)}).catch(err=>{updateFileList(_file,{status:"error",error:err}),onError&&onError(err,file),onChange&&onChange(file)})};return(0,jsx_runtime.jsxs)("div",{className:"viking-upload-component",children:[drag?(0,jsx_runtime.jsx)("div",{className:"viking-upload-input",style:{display:"inline-block"},onClick:handleClick,children:(0,jsx_runtime.jsx)(Dragger,{onFile:files=>{uploadFiles(files)},children})}):(0,jsx_runtime.jsx)(Button_button.A,{btnType:"primary",onClick:handleClick,children}),(0,jsx_runtime.jsx)("input",{className:"viking-file-input",style:{display:"none"},onChange:e=>{const files=e.target.files;files&&(uploadFiles(files),fileInput.current&&(fileInput.current.value=""))},ref:fileInput,type:"file",accept,multiple}),(0,jsx_runtime.jsx)(uploadList,{fileList,onRemove:_file=>{setFileList(prevList=>prevList.filter(item=>item.uid!==_file.uid)),onRemove&&onRemove(_file)}})]})},upload=Upload;Upload.__docgenInfo={description:"",methods:[],displayName:"Upload",props:{action:{required:!0,tsType:{name:"string"},description:""},defaultFileList:{required:!1,tsType:{name:"Array",elements:[{name:"UploadFile"}],raw:"UploadFile[]"},description:""},onProgress:{required:!1,tsType:{name:"signature",type:"function",raw:"(percentage: number, file: File) => void",signature:{arguments:[{type:{name:"number"},name:"percentage"},{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:""},onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"(data: any, file: File) => void",signature:{arguments:[{type:{name:"any"},name:"data"},{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:"成功回调"},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(err: any, file: File) => void",signature:{arguments:[{type:{name:"any"},name:"err"},{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:"失败回调"},beforeUpload:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: File) => boolean | Promise<File>",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"union",raw:"boolean | Promise<File>",elements:[{name:"boolean"},{name:"Promise",elements:[{name:"File"}],raw:"Promise<File>"}]}}},description:"上传文件之前处理"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: File) => void",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:"文件修改回调"},onRemove:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: UploadFile) => void",signature:{arguments:[{type:{name:"UploadFile"},name:"file"}],return:{name:"void"}}},description:"移除事件"},headers:{required:!1,tsType:{name:"signature",type:"object",raw:"{ [key: string]: any }",signature:{properties:[{key:{name:"string"},value:{name:"any",required:!0}}]}},description:""},name:{required:!1,tsType:{name:"string"},description:"文件上传时key的名称",defaultValue:{value:'"file"',computed:!1}},data:{required:!1,tsType:{name:"signature",type:"object",raw:"{ [key: string]: any }",signature:{properties:[{key:{name:"string"},value:{name:"any",required:!0}}]}},description:"需要携带的其余参数"},withCredentials:{required:!1,tsType:{name:"boolean"},description:"发送是否携带cookie"},accept:{required:!1,tsType:{name:"string"},description:"接收类型"},multiple:{required:!1,tsType:{name:"boolean"},description:"是否多文件"},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},drag:{required:!1,tsType:{name:"boolean"},description:"拖动上传",defaultValue:{value:"false",computed:!1}}}};var external_STORYBOOK_MODULE_TEST_=__webpack_require__("storybook/test");const upload_stories={title:"Glaze UI组件库/Upload",component:upload,parameters:{layout:"centered",docs:{}}},SimpleUpload={args:{action:"https://jsonplaceholder.typicode.com/posts",onProgress:(0,external_STORYBOOK_MODULE_TEST_.fn)(),onSuccess:(0,external_STORYBOOK_MODULE_TEST_.fn)(),onError:(0,external_STORYBOOK_MODULE_TEST_.fn)(),children:"upload"}},DragUpload={args:{action:"https://jsonplaceholder.typicode.com/posts",onProgress:(0,external_STORYBOOK_MODULE_TEST_.fn)(),onSuccess:(0,external_STORYBOOK_MODULE_TEST_.fn)(),onError:(0,external_STORYBOOK_MODULE_TEST_.fn)(),children:"DragFile upload",drag:!0}},CheckUpload={args:{action:"https://jsonplaceholder.typicode.com/posts",onChange:(0,external_STORYBOOK_MODULE_TEST_.fn)(),defaultFileList:[{uid:"123",size:1234,name:"hello.md",status:"uploading",percent:30},{uid:"122",size:1234,name:"hello.md",status:"success",percent:30},{uid:"121",size:1234,name:"hello.md",status:"error",percent:30}],children:"upload"}},__namedExportsOrder=["SimpleUpload","DragUpload","CheckUpload"];SimpleUpload.parameters={...SimpleUpload.parameters,docs:{...SimpleUpload.parameters?.docs,source:{originalSource:'{\n  args: {\n    action: "https://jsonplaceholder.typicode.com/posts",\n    onProgress: fn(),\n    // 利用fn()来模拟触发事件\n    onSuccess: fn(),\n    onError: fn(),\n    children: "upload"\n  }\n}',...SimpleUpload.parameters?.docs?.source}}},DragUpload.parameters={...DragUpload.parameters,docs:{...DragUpload.parameters?.docs,source:{originalSource:'{\n  args: {\n    action: "https://jsonplaceholder.typicode.com/posts",\n    onProgress: fn(),\n    // 利用fn()来模拟触发事件\n    onSuccess: fn(),\n    onError: fn(),\n    children: "DragFile upload",\n    drag: true\n  }\n}',...DragUpload.parameters?.docs?.source}}},CheckUpload.parameters={...CheckUpload.parameters,docs:{...CheckUpload.parameters?.docs,source:{originalSource:'{\n  args: {\n    action: "https://jsonplaceholder.typicode.com/posts",\n    onChange: fn(),\n    // beforeUpload: checkFileSize,\n    defaultFileList: defaultFileList,\n    children: "upload"\n  }\n}',...CheckUpload.parameters?.docs?.source}}}}}]);